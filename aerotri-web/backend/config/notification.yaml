# AeroTri Web 通知服务配置
# 配置说明见 notification.yaml.example

notification:
  # 全局开关
  enabled: true
  
  # 钉钉多通道配置
  dingtalk:
    channels:
      # 通道1: Block 运行通知（任务开始/完成/失败）
      block_events:
        enabled: true
        webhook_url: "https://oapi.dingtalk.com/robot/send?access_token=d599a5c0e390391a124afa38f47f2e9eb5f943924baa0afd02cae4cc04ac8a12"
        secret: "SECf8fa75caa77c5f0f3d85a9b53b0adf60d8e840479ca60f8309b09e2e040dea34"
        events:
          - task_started
          - task_completed
          - task_failed
          
      # 通道2: 后端状态（系统状态汇总 + 后端健康）
      backend_status:
        enabled: true
        webhook_url: "https://oapi.dingtalk.com/robot/send?access_token=93897e2d2316ef61a0a220021a86201a36ae11e018777ae5fe8df412b334eae6"
        secret: "SEC26fbe529f20466c3a85018fdcd9190f21d9d0101300bad884cf32f1f31aa2142"
        events:
          - system_status
          - backend_startup
          - backend_shutdown
          - backend_error
          
      # 通道3: 任务监控（周期性任务汇总）
      task_monitor:
        enabled: true
        webhook_url: "https://oapi.dingtalk.com/robot/send?access_token=86640d7e4df0948d1d7fe57da17500f37f1cc445b1281e22393d8e899869cbf6"
        secret: "SEC7cce62a16e4e73574ec739e5f77e54526232f8e2a046edec2251082a3410a7c6"
        events:
          - periodic_task_summary
    
  # 飞书配置（后续迭代）
  feishu:
    enabled: false
    channels: {}
    
  # 周期性汇总配置
  periodic:
    # 任务汇总（发送到 task_monitor 通道）
    task_summary:
      enabled: true
      cron: "0 21 * * *"  # 每天21:00
      
    # 系统状态汇总（发送到 backend_status 通道）
    system_status:
      enabled: true
      interval: 14400  # 每4小时（秒）
