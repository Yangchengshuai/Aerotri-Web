# 应用基础配置
name: "AeroTri-Web"
version: "1.0.0"
debug: false
environment: "production"
cors_origins:
  - "http://localhost:5173"
log_level: "INFO"

# 路径配置（相对路径基于 backend/ 目录）
paths:
  project_root: ".."
  data_dir: "./data"
  outputs_dir: "./data/outputs"
  blocks_dir: "./data/blocks"
  thumbnails_dir: "./data/thumbnails"

# 数据库配置
database:
  path: "./data/aerotri.db"
  pool_size: 5
  max_overflow: 10

# 算法路径（使用系统 PATH 中的命令）
algorithms:
  colmap:
    path: "colmap"
  glomap:
    path: "glomap"
  instantsfm:
    path: "ins-sfm"
  openmvg:
    bin_dir: "/usr/local/bin"
    sensor_db: "/usr/local/share/sensor_width_camera_database.txt"
  openmvs:
    bin_dir: "/usr/local/lib/openmvs/bin"

# 3D Gaussian Splatting
gaussian_splatting:
  repo_path: "./gs_workspace/gaussian-splatting"
  python: "python"
  tensorboard_path: "tensorboard"
  tensorboard_port_start: 6006
  network_gui_ip: "127.0.0.1"
  network_gui_port_start: 6009

# 队列配置
queue:
  max_concurrent: 1
  scheduler_interval: 5

# GPU 配置
gpu:
  monitor_interval: 2
  auto_selection: "most_free"
  default_device: 0

# cuDSS（可选）
cudss_dir: null

# SPZ 压缩配置
spz:
  python: "python"

# 图像根路径配置
image_roots:
  default: "./data/images"
  paths: []

# 诊断Agent配置（可选功能）
diagnostic:
  enabled: true  # 全局开关，默认关闭
  openclaw_cmd: "openclaw"  # OpenClaw CLI路径（需要在PATH中或绝对路径）
  agent_id: "main"  # OpenClaw Agent ID
  # 路径配置：支持绝对路径（推荐）和相对路径
  agent_memory_path: "/root/work/aerotri-web/data/diagnostics/AerotriWeb_AGENT.md"  # Agent知识库
  history_log_path: "/root/work/aerotri-web/data/diagnostics/diagnosis_history.log"  # 诊断历史
  claude_md_path: "/root/work/Aerotri-Web/aerotri-web/CLAUDE.md"  # 项目文档路径
  # 上下文持久化目录（用于调试，存储发送给OpenClaw的完整上下文）
  context_output_dir: "/root/work/aerotri-web/data/diagnostics/contexts"
  timeout_seconds: 180  # OpenClaw调用超时时间
  auto_fix: false  # 是否尝试自动修复（谨慎启用）
