# Aerotri-Web ç³»ç»Ÿæ¶æ„

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» Aerotri-Web çš„æŠ€æœ¯æ¶æ„å’Œè®¾è®¡ã€‚

## ç›®å½•

- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [ç³»ç»Ÿæ¶æ„å›¾](#ç³»ç»Ÿæ¶æ„å›¾)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
- [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
- [æ•°æ®æµ](#æ•°æ®æµ)
- [è®¾è®¡åŸåˆ™](#è®¾è®¡åŸåˆ™)

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯

- **æ¡†æ¶**: Vue 3 + TypeScript
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router
- **æ„å»ºå·¥å…·**: Vite
- **3D å¯è§†åŒ–**: CesiumJS, Three.js
- **UI ç»„ä»¶**: è‡ªå®šä¹‰ç»„ä»¶

### åç«¯

- **æ¡†æ¶**: FastAPI
- **æ•°æ®åº“**: SQLAlchemy (SQLite)
- **WebSocket**: FastAPI WebSocket
- **å¼‚æ­¥å¤„ç†**: asyncio
- **éªŒè¯**: Pydantic

### ç®—æ³•é›†æˆ

- **SfM**: COLMAP, GLOMAP, InstantSfM, OpenMVG
- **å¯†é›†é‡å»º**: OpenMVS
- **3DGS**: Gaussian Splatting
- **3D Tiles**: è‡ªå®šä¹‰è½¬æ¢ç®¡é“

---

## ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend (Vue 3)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ BlockCard    â”‚  â”‚Reconstructionâ”‚  â”‚  ThreeViewer â”‚    â”‚
â”‚  â”‚              â”‚  â”‚    Panel     â”‚  â”‚              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  CesiumViewerâ”‚  â”‚ProgressView  â”‚  â”‚ParameterForm â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ WebSocket + HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend (FastAPI)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              API Layer (app/api/)                    â”‚  â”‚
â”‚  â”‚  blocks.py | queue.py | reconstruction.py | tiles.pyâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Service Layer (app/services/)            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚task_runnerâ”‚  â”‚openmvs_  â”‚  â”‚   gs_runner      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ (SfM)    â”‚  â”‚runner    â”‚  â”‚ (3DGS Training)  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚    Diagnostic Agent (OpenClaw Integration)     â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Data Layer (app/models/)                 â”‚  â”‚
â”‚  â”‚  Block | ReconVersion | BlockGS | BlockGSTiles     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Algorithms (External Binaries)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ COLMAP   â”‚ â”‚ GLOMAP   â”‚ â”‚OpenMVG   â”‚ â”‚InstantSfMâ”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ OpenMVS  â”‚ â”‚  3DGS    â”‚ â”‚  Ceres Solver (optional) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç›®å½•ç»“æ„

```
Aerotri-Web/
â”œâ”€â”€ aerotri-web/              # ä¸»åº”ç”¨ç›®å½•
â”‚   â”œâ”€â”€ backend/              # FastAPI åç«¯
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/          # API ç«¯ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ models/       # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ services/     # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ ws/           # WebSocket å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ conf/         # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ main.py       # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ application.yaml
â”‚   â”‚   â”‚   â””â”€â”€ observability.yaml
â”‚   â”‚   â”œâ”€â”€ data/             # æ•°æ®ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ aerotri.db    # SQLite æ•°æ®åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ outputs/      # ä»»åŠ¡è¾“å‡º
â”‚   â”‚   â”‚   â””â”€â”€ blocks/       # Block å·¥ä½œç›®å½•
â”‚   â”‚   â”œâ”€â”€ tests/            # æµ‹è¯•
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”‚
â”‚   â””â”€â”€ frontend/             # Vue 3 å‰ç«¯
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ api/          # API å®¢æˆ·ç«¯
â”‚       â”‚   â”œâ”€â”€ components/   # Vue ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ stores/       # Pinia çŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ types/        # TypeScript ç±»å‹
â”‚       â”‚   â”œâ”€â”€ views/        # é¡µé¢ç»„ä»¶
â”‚       â”‚   â””â”€â”€ main.ts
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â”‚   â”œâ”€â”€ 01-quickstart/
â”‚   â”œâ”€â”€ 02-installation/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ colmap/                   # COLMAP å­æ¨¡å—
â”œâ”€â”€ gs_workspace/             # 3DGS å­æ¨¡å—
â”œâ”€â”€ visionary/                # Visionary æŸ¥çœ‹å™¨
â””â”€â”€ README.md
```

---

## æ ¸å¿ƒæ¨¡å—

### å‰ç«¯æ¨¡å—

#### API å±‚ (`src/api/`)
- HTTP å®¢æˆ·ç«¯å°è£…
- WebSocket è¿æ¥ç®¡ç†
- ç±»å‹å®‰å…¨ API

#### çŠ¶æ€ç®¡ç† (`src/stores/`)
- `blocks` - Block çŠ¶æ€
- `queue` - ä»»åŠ¡é˜Ÿåˆ—çŠ¶æ€
- `gpu` - GPU çŠ¶æ€

#### ç»„ä»¶ (`src/components/`)
- `BlockCard` - Block å¡ç‰‡
- `ReconstructionPanel` - é‡å»ºé¢æ¿
- `ThreeViewer` - Three.js æŸ¥çœ‹å™¨
- `CesiumViewer` - Cesium æŸ¥çœ‹å™¨
- `ProgressView` - è¿›åº¦è§†å›¾
- `ParameterForm` - å‚æ•°è¡¨å•

### åç«¯æ¨¡å—

#### API å±‚ (`app/api/`)
- `blocks.py` - Block ç®¡ç†
- `queue.py` - ä»»åŠ¡é˜Ÿåˆ—
- `reconstruction.py` - é‡å»ºç®¡ç†
- `tasks.py` - ä»»åŠ¡æ‰§è¡Œ
- `tiles.py` - 3D Tiles è½¬æ¢

#### æœåŠ¡å±‚ (`app/services/`)
- `task_runner.py` - SfM ä»»åŠ¡æ‰§è¡Œ
- `openmvs_runner.py` - OpenMVS æ‰§è¡Œ
- `gs_runner.py` - 3DGS è®­ç»ƒ
- `tiles_runner.py` - 3D Tiles è½¬æ¢
- `notification.py` - é€šçŸ¥æœåŠ¡
- `task_notifier.py` - ä»»åŠ¡é€šçŸ¥

#### æ•°æ®æ¨¡å‹ (`app/models/`)
- `Block` - å›¾åƒé›†åˆ
- `ReconVersion` - é‡å»ºç‰ˆæœ¬
- `BlockGS` - 3DGS çŠ¶æ€
- `BlockGSTiles` - 3DGS Tiles çŠ¶æ€

---

## æ•°æ®æµ

### SfM é‡å»ºæµç¨‹

```
ç”¨æˆ·ä¸Šä¼  â†’ åˆ›å»º Block â†’ é€‰æ‹©ç®—æ³• â†’ é…ç½®å‚æ•° â†’ åŠ å…¥é˜Ÿåˆ—
    â†“
ä»»åŠ¡è°ƒåº¦å™¨ (queue_scheduler)
    â†“
task_runner (SfM ç®—æ³•)
    â†“
COLMAP/GLOMAP/InstantSfM/OpenMVG
    â†“
sparse/0/ (ç¨€ç–ç‚¹äº‘)
    â†“
OpenMVS (å¯é€‰)
    â†“
dense/ mesh/ texture/
    â†“
3DGS è®­ç»ƒ (å¯é€‰)
    â†“
3dgs/point_cloud/
    â†“
3D Tiles è½¬æ¢ (å¯é€‰)
    â†“
gs_tiles/ (3D Tiles)
```

### å®æ—¶è¿›åº¦æ›´æ–°

```
åç«¯ä»»åŠ¡ â†’ WebSocket â†’ å‰ç«¯ ProgressView â†’ UI æ›´æ–°
```

---

## è®¾è®¡åŸåˆ™

### 1. åˆ†å±‚æ¶æ„

æ¸…æ™°çš„åˆ†å±‚ç»“æ„ï¼š
- API å±‚: å¤„ç† HTTP è¯·æ±‚
- æœåŠ¡å±‚: ä¸šåŠ¡é€»è¾‘
- æ•°æ®å±‚: æ•°æ®æŒä¹…åŒ–

### 2. å¼‚æ­¥ä¼˜å…ˆ

- ä½¿ç”¨ FastAPI å¼‚æ­¥æ”¯æŒ
- WebSocket å®æ—¶æ›´æ–°
- åå°ä»»åŠ¡å¤„ç†

### 3. é…ç½®é©±åŠ¨

- YAML é…ç½®æ–‡ä»¶
- ç¯å¢ƒå˜é‡è¦†ç›–
- ç±»å‹å®‰å…¨éªŒè¯

### 4. å¯æ‰©å±•æ€§

- æ¨¡å—åŒ–è®¾è®¡
- æ’ä»¶å¼ç®—æ³•é›†æˆ
- RESTful API

### 5. å®¹é”™è®¾è®¡

- ä¼˜é›…é™çº§
- é”™è¯¯æ¢å¤
- ä»»åŠ¡å–æ¶ˆæ”¯æŒ

ğŸ‘‰ **å¼€å‘æŒ‡å—**: [05-development/](./05-development/)
